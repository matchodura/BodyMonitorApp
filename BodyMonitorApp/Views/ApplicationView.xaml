<Window x:Class="BodyMonitorApp.ApplicationView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:BodyMonitorApp"
        Title="Body Monitor App" MinHeight="400" MinWidth="600" MaxHeight="800" MaxWidth="1000"
        WindowStartupLocation="CenterScreen">

    <Window.Resources >
        <DataTemplate DataType="{x:Type local:HomeViewModel}" >
            <local:HomeView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:LoginViewModel}">
            <local:LoginView />
        </DataTemplate>
        
        <DataTemplate DataType="{x:Type local:CreateAccountViewModel}">
            <local:CreateAccountView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:LoggedInViewModel}">
            <local:LoggedInView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:ForgotPasswordViewModel}">
            <local:ForgotPasswordView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:ProfileInfoViewModel}">
            <local:ProfileInfoView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:ProgressViewModel}">
            <local:ProgressView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:WorkoutViewModel}">
            <local:WorkoutView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:ChartsViewModel}">
            <local:ChartsView />
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:AboutViewModel}">
            <local:AboutView />
        </DataTemplate>

        

    </Window.Resources>



    <DockPanel >
        <StatusBar Name="statusbar" DockPanel.Dock="Bottom">
            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="80" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="20" />
                        </Grid.ColumnDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>
            <StatusBarItem Grid.Column="0">
                <TextBlock Text="{Binding CurrentPageViewModel.Name}" />
            </StatusBarItem>
            <Separator Grid.Column="1" />
            <StatusBarItem Grid.Column="2" Grid.ColumnSpan="2">
                <TextBlock Text="{Binding LoginVM.CurrentLogin.UserName, StringFormat='Current User: {0}'}"/>
            </StatusBarItem>

            <Separator Grid.Column="3" />
            <StatusBarItem Grid.Column="2" Grid.ColumnSpan="2">
                <TextBlock Text="{Binding LoginVM.CurrentLogin.UserId, StringFormat='Current User: {0}'}"/>
            </StatusBarItem>


        </StatusBar>

        <Border DockPanel.Dock="Left" BorderBrush="Black" BorderThickness="0,0,1,0" Width="80" Background="LightBlue">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="100"/>
                    <RowDefinition Height="200"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>


            <ItemsControl ItemsSource="{Binding PageViewModels}" Grid.Row="0">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Content="{Binding Name}"
                                Command="{Binding DataContext.ChangePageCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                CommandParameter="{Binding }"
                                Margin="2,5"
                                Visibility="{Binding Visibility}"/>
                    </DataTemplate>
                    
                </ItemsControl.ItemTemplate>
                
            </ItemsControl>
                
            <ItemsControl ItemsSource="{Binding UserPageViewModels, Mode=OneWay}" Grid.Row="1"  >
                    <ItemsControl.ItemTemplate >
                        <DataTemplate>
                            <Button Content="{Binding Name}"
                                Command="{Binding DataContext.ChangePageCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                CommandParameter="{Binding }"
                                Margin="2,5"
                                Visibility="{Binding Visibility}"/>
                        </DataTemplate>

                    </ItemsControl.ItemTemplate>
            </ItemsControl>

                <Button Grid.Row="2" Content="Logout user" Command="{Binding LogoutUserCommand}" Visibility="{Binding ButtonVisibility}"/>
            </Grid>


        </Border>

        <ContentControl Content="{Binding CurrentPageViewModel, Mode=TwoWay}"/>

    </DockPanel>
</Window>
